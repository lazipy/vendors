{"version":3,"sources":["client/components/AuthenticatedComponent.js"],"names":["requireAuthentication","Component","visitorId","state","user","uid","isAuthenticated","isLogin","changeMenuItem","loginActions","props","componentWillMount","checkAuth","componentWillReceiveProps","location","pathname","includes","email","password","history","push","render","React","PureComponent","propTypes","PropTypes","number","bool","object","dispatch","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;QAMgBA,qB,GAAAA,qB;;AANhB;;;;AACA;;AACA;;;;AACA;;AACA;;;;AAEO,SAASA,qBAAT,CAA+BC,SAA/B,EAA0C;AAAA;;AAC/C,gBAAQ,yBACN,iBAAS;AACP,WAAO;AACLC,iBAAWC,MAAMC,IAAN,CAAWF,SADjB;AAELG,WAAKF,MAAMC,IAAN,CAAWC,GAFX;AAGLC,uBAAiBH,MAAMC,IAAN,CAAWG;AAHvB,KAAP;AAKD,GAPK,EAQN;AACEC,wCADF;AAEEC;AAFF,GARM,CAAR;AAAA;;AAcE,oCAAYC,KAAZ,EAAmB;AAAA;AAAA,4DACjB,gCAAMA,KAAN,CADiB;AAElB;;AAhBH,qCA2BEC,kBA3BF,iCA2BuB;AACnB,WAAKC,SAAL;AACD,KA7BH;;AAAA,qCA8BEC,yBA9BF,wCA8B8B;AAC1B,WAAKD,SAAL;AACD,KAhCH;;AAAA,qCAiCQA,SAjCR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAkCS,KAAKF,KAAL,CAAWJ,eAlCpB;AAAA;AAAA;AAAA;;AAAA,qBAmCU,KAAKI,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BC,QAA7B,CAAsC,SAAtC,CAnCV;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAoCc,KAAKN,KAAL,CAAWD,YAAX,CAAwB,EAAEQ,OAAO,kBAAT,EAA6BC,UAAU,QAAvC,EAAxB,CApCd;;AAAA;AAAA;AAAA;;AAAA;AAsCQ,qBAAKR,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,qBAAKV,KAAL,CAAWF,cAAX,CAA0B,GAA1B;;AAvCR;AAAA;AAAA;;AAAA;AAyCW,oBAAI,KAAKE,KAAL,CAAWL,GAAX,KAAmB,KAAKH,SAA5B,EAAuC;AAC5C,sBAAI,CAAC,KAAKQ,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BC,QAA7B,CAAsC,SAAtC,CAAL,EAAuD;AACrD,yBAAKN,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,yBAAKV,KAAL,CAAWF,cAAX,CAA0B,GAA1B;AACD;AACF;;AA9CL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,qCAgDEa,MAhDF,qBAgDW;AACP,aAAO;AAAA;AAAA;AAAM,aAAKX,KAAL,CAAWJ,eAAX,GAA6B,8BAAC,SAAD,EAAe,KAAKI,KAApB,CAA7B,GAA6D;AAAnE,OAAP;AACD,KAlDH;;AAAA;AAAA,IAaqCY,gBAAMC,aAb3C,WAiBSC,SAjBT,GAiBqB;AACjBtB,eAAWuB,oBAAUC,MADJ;AAEjBrB,SAAKoB,oBAAUC,MAFE;AAGjBpB,qBAAiBmB,oBAAUE,IAHV;AAIjBb,cAAUW,oBAAUG,MAJH;AAKjBC,cAAUJ,oBAAUK,IALH;AAMjBX,aAASM,oBAAUG,MANF;AAOjBpB,oBAAgBiB,oBAAUK,IAPT;AAQjBrB,kBAAcgB,oBAAUK;AARP,GAjBrB;AAoDD","file":"AuthenticatedComponent.js","sourceRoot":"/Users/lee/Project/analysys/yapi/vendors","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { changeMenuItem } from '../reducer/modules/menu';\nimport { loginActions } from '../reducer/modules/user';\n\nexport function requireAuthentication(Component) {\n  return @connect(\n    state => {\n      return {\n        visitorId: state.user.visitorId,\n        uid: state.user.uid,\n        isAuthenticated: state.user.isLogin\n      };\n    },\n    {\n      changeMenuItem,\n      loginActions\n    }\n  )\n  class AuthenticatedComponent extends React.PureComponent {\n    constructor(props) {\n      super(props);\n    }\n    static propTypes = {\n      visitorId: PropTypes.number,\n      uid: PropTypes.number,\n      isAuthenticated: PropTypes.bool,\n      location: PropTypes.object,\n      dispatch: PropTypes.func,\n      history: PropTypes.object,\n      changeMenuItem: PropTypes.func,\n      loginActions: PropTypes.func\n    };\n    componentWillMount() {\n      this.checkAuth();\n    }\n    componentWillReceiveProps() {\n      this.checkAuth();\n    }\n    async checkAuth() {\n      if (!this.props.isAuthenticated) {\n        if (this.props.location.pathname.includes('project')) {\n          await this.props.loginActions({ email: '877286986@qq.com', password: '123456' })\n        } else {\n          this.props.history.push('/');\n          this.props.changeMenuItem('/');\n        }\n      } else if (this.props.uid === this.visitorId) {\n        if (!this.props.location.pathname.includes('project')) {\n          this.props.history.push('/');\n          this.props.changeMenuItem('/');\n        }\n      }\n    }\n    render() {\n      return <div>{this.props.isAuthenticated ? <Component {...this.props} /> : null}</div>;\n    }\n  };\n}\n"]}