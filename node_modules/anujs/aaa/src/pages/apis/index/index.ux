<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class="api-page">
            <div class="anu-block">
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e246_15" data-beacon-uid="default"><text>showModal</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e249_15" data-beacon-uid="default"><text>showToast</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e252_15" data-beacon-uid="default"><text>显示上下文菜单</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e255_15" data-beacon-uid="default"><text>短震</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e258_15" data-beacon-uid="default"><text>长震</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e261_15" data-beacon-uid="default"><text>打电话</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e264_15" data-beacon-uid="default"><text>文件上传</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e267_15" data-beacon-uid="default"><text>文件下载</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e271_12" data-beacon-uid="default"><text>数据请求</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e276_15" data-beacon-uid="default"><text>扫一扫</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e280_12" data-beacon-uid="default"><text>存储</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e286_15" data-beacon-uid="default"><text>获取本地文件</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e290_12" data-beacon-uid="default"><text>剪切板</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e296_12" data-beacon-uid="default"><text>画板</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e301_15" data-beacon-uid="default"><text>获取地理位置</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e304_15" data-beacon-uid="default"><text>获取网络类型</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e307_15" data-beacon-uid="default"><text>获取系统信息(getSystemInfo)</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e310_15" data-beacon-uid="default"><text>选择图片</text></div>
                <block for="(i7586,item) in state.img">
                    <image src="{{item}}"></image>
                </block>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e318_15" data-beacon-uid="default"><text>setTitleBar</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e321_15" data-beacon-uid="default"><text>保存图标到桌面</text></div>
                <div onclick="dispatchEvent" class="anu-item" data-click-uid="e325_12" data-beacon-uid="default"><text>路由</text></div>
            </div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";

function alert(msg) {
    React.api.showModal({
        title: '',
        content: msg,
        showCancel: false,
        confirmText: '确定'
    });
}

function P() {
    this.state = {
        text: 'page3',
        img: []
    };
}

P = React.toClass(P, React.Component, {
    componentDidMount: function() {},
    click: function() {
        console.log(111);
    },
    showModal: function() {
        React.api.showModal({
            title: '我是一个title',
            content: '内容是啥',
            cancelText: '取消',
            confirmText: '确定',
            success: function(result) {
                console.log('result', result);
            }
        });
    },
    showContextMenu: function() {
        React.api.showActionSheet({
            itemList: ['item1', 'item2', 'item3', 'item4'],
            itemColor: '#ff33ff',
            success: function(data) {
                alert("handling success, " + JSON.stringify(data));
            },
            cancel: function() {
                alert('handling cancel');
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    vibrateLong: function() {
        console.log('vibrateLong');
        React.api.vibrateLong({
            success: () => {
                alert('震动起来了');
            }
        });
    },
    vibrateShort: function() {
        console.log('vibrateShort');
        React.api.vibrateShort({
            success: () => {
                alert('震动起来了');
            }
        });
    },
    upload: function() {
        console.log('upload');
        React.api.chooseImage({
            success: function(data) {
                console.log("handling success: " + data.uri);
                React.api.uploadFile({
                    url: 'http://yapi.demo.qunar.com/mock/291/aaaaa',
                    filePath: data.uri,
                    name: 'file1',
                    formData: {
                        user: 'test'
                    },
                    success: function(data) {
                        React.api.showModal({
                            title: 'success'
                        });
                    },
                    fail: function(data, code) {
                        console.log("handling fail, code = " + code);
                        React.api.showModal({
                            title: 'fail',
                            content: "code = " + code
                        });
                    }
                });
            }
        });
    },
    request: function() {
        React.api.request({
            url: 'http://yapi.demo.qunar.com/mock/5774/unauth/account/register',
            method: 'post',
            success: function(res) {
                alert("the status code of the response: " + JSON.stringify(res.data));
            },
            fail: function(err) {
                alert("handling fail, code = " + err);
            }
        });
    },
    download: function() {
        React.api.downloadFile({
            url: 'https://yapi.ymfe.org/devops/index.html#%E7%A6%81%E6%AD%A2%E6%B3%A8%E5%86%8C',
            success: function(data) {
                alert("handling success" + data);
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    scan: function() {
        React.api.scanCode({
            success: function(data) {
                alert("handling success: " + data.result);
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    onShare: function() {
        var path = React.getCurrentPage().props.path;
        return {
            title: '妹子图片',
            path: path,
            imageUrl: "/assets/logo.jpg",
            success: res => {
                React.api.showToast({
                    title: 'handling success' + res
                });
            },
            fail: res => {
                React.api.showToast({
                    title: 'handling fail' + res
                });
            }
        };
    },
    getSavedFileInfo: function() {
        React.api.getSavedFileInfo({
            filePath: 'internal://Users/qitmac000476/Documents/weixin/nanachi/_site/apis/file.html',
            success: function(data) {
                alert("uri:" + data.uri + ", size: " + data.size + ", createTime: " + data.createTime);
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    gotoSome: function(url) {
        console.log('url', url);

        if (url) {
            React.api.navigateTo({
                url
            });
        }
    },
    getLocation: function() {
        React.api.getLocation({
            success: function(data) {
                alert("handling success: longitude = " + data.longitude + ", latitude = " + data.latitude);
            }
        });
    },
    getNetworkType: function() {
        React.api.getNetworkType({
            success: function(data) {
                alert("handling success: " + data.networkType);
            }
        });
    },
    getSystemInfo: function() {
        React.api.getSystemInfo({
            success: function(data) {
                alert("handling success: " + JSON.stringify(data));
            }
        });
    },
    chooseImage: function() {
        React.api.chooseImage({
            count: 1,
            success: res => {
                this.setState({
                    img: res.tempFilePaths
                });
            }
        });
    },
    setTitleBar: function() {
        React.api.setNavigationBarTitle({
            title: 'a new title',
            success: function() {
                alert('setTitleBar success');
            }
        });
    },
    makePhoneCall: function() {
        React.api.makePhoneCall({
            phoneNumber: '10086'
        });
    },
    showToast: function() {
        React.api.showToast({
            title: 'showToast' + React.api.hideToast
        });
    },
    createShortcut: function() {
        React.api.createShortcut();
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "api-page"
        }, h("div", {
            class: "anu-block"
        }, h("div", {
            onClick: this.showModal,
            class: "anu-item",
            "data-click-uid": "e246_15",
            "data-beacon-uid": "default"
        }, h("text", null, "showModal")), h("div", {
            onClick: this.showToast,
            class: "anu-item",
            "data-click-uid": "e249_15",
            "data-beacon-uid": "default"
        }, h("text", null, "showToast")), h("div", {
            onClick: this.showContextMenu,
            class: "anu-item",
            "data-click-uid": "e252_15",
            "data-beacon-uid": "default"
        }, h("text", null, "显示上下文菜单")), h("div", {
            onClick: this.vibrateShort,
            class: "anu-item",
            "data-click-uid": "e255_15",
            "data-beacon-uid": "default"
        }, h("text", null, "短震")), h("div", {
            onClick: this.vibrateLong,
            class: "anu-item",
            "data-click-uid": "e258_15",
            "data-beacon-uid": "default"
        }, h("text", null, "长震")), h("div", {
            onClick: this.makePhoneCall,
            class: "anu-item",
            "data-click-uid": "e261_15",
            "data-beacon-uid": "default"
        }, h("text", null, "打电话")), h("div", {
            onClick: this.upload,
            class: "anu-item",
            "data-click-uid": "e264_15",
            "data-beacon-uid": "default"
        }, h("text", null, "文件上传")), h("div", {
            onClick: this.download,
            class: "anu-item",
            "data-click-uid": "e267_15",
            "data-beacon-uid": "default"
        }, h("text", null, "文件下载")), h("div", {
            onClick: this.gotoSome.bind(this, '../../../pages/apis/request/index'),
            class: "anu-item",
            "data-click-uid": "e271_12",
            "data-beacon-uid": "default"
        }, h("text", null, "数据请求")), h("div", {
            onClick: this.scan,
            class: "anu-item",
            "data-click-uid": "e276_15",
            "data-beacon-uid": "default"
        }, h("text", null, "扫一扫")), h("div", {
            onClick: this.gotoSome.bind(this, '../../../pages/apis/storage/index'),
            class: "anu-item",
            "data-click-uid": "e280_12",
            "data-beacon-uid": "default"
        }, h("text", null, "存储")), h("div", {
            onClick: this.getSavedFileInfo,
            class: "anu-item",
            "data-click-uid": "e286_15",
            "data-beacon-uid": "default"
        }, h("text", null, "获取本地文件")), h("div", {
            onClick: this.gotoSome.bind(this, '../../../pages/apis/clipboard/index'),
            class: "anu-item",
            "data-click-uid": "e290_12",
            "data-beacon-uid": "default"
        }, h("text", null, "剪切板")), h("div", {
            onClick: this.gotoSome.bind(this, '../../../pages/apis/canvas/index'),
            class: "anu-item",
            "data-click-uid": "e296_12",
            "data-beacon-uid": "default"
        }, h("text", null, "画板")), h("div", {
            onClick: this.getLocation,
            class: "anu-item",
            "data-click-uid": "e301_15",
            "data-beacon-uid": "default"
        }, h("text", null, "获取地理位置")), h("div", {
            onClick: this.getNetworkType,
            class: "anu-item",
            "data-click-uid": "e304_15",
            "data-beacon-uid": "default"
        }, h("text", null, "获取网络类型")), h("div", {
            onClick: this.getSystemInfo,
            class: "anu-item",
            "data-click-uid": "e307_15",
            "data-beacon-uid": "default"
        }, h("text", null, "获取系统信息(getSystemInfo)")), h("div", {
            onClick: this.chooseImage,
            class: "anu-item",
            "data-click-uid": "e310_15",
            "data-beacon-uid": "default"
        }, h("text", null, "选择图片")), this.state.img.map(function(item, i7586) {
            return h("image", {
                src: item
            });
        }, this), h("div", {
            onClick: this.setTitleBar,
            class: "anu-item",
            "data-click-uid": "e318_15",
            "data-beacon-uid": "default"
        }, h("text", null, "setTitleBar")), h("div", {
            onClick: this.createShortcut,
            class: "anu-item",
            "data-click-uid": "e321_15",
            "data-beacon-uid": "default"
        }, h("text", null, "保存图标到桌面")), h("div", {
            onClick: this.gotoSome.bind(this, '../../../pages/apis/route/index'),
            class: "anu-item",
            "data-click-uid": "e325_12",
            "data-beacon-uid": "default"
        }, h("text", null, "路由"))));;
    },
    classUid: "c8362"
}, {});
P.config = {
    navigationBarTextStyle: 'white',
    navigationBarBackgroundColor: '#0088a4',
    navigationBarTitleText: 'API',
    backgroundColor: '#eeeeee',
    backgroundTextStyle: 'light'
};
P = React.registerPage(P, "pages/apis/index/index");
export default P;
</script>
<style>
@import '../../../assets/global.css';
</style>