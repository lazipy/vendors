<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class="col">
            <div><text>输入要储存的内容, 放value中</text><input value="{{state.value}}" onchange="dispatchEvent" data-change-uid="e90_75" data-beacon-uid="default"></input></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e91_13" data-beacon-uid="default"><text>setStorage</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e94_13" data-beacon-uid="default"><text>getStorage('value')</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e97_13" data-beacon-uid="default"><text>getStorage( 'aaa' )</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e100_13" data-beacon-uid="default"><text>removeStorage</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e103_13" data-beacon-uid="default"><text>setStorageSync</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e106_13" data-beacon-uid="default"><text>getStorageSync</text></div>
            <div onclick="dispatchEvent" class="item" data-click-uid="e109_13" data-beacon-uid="default"><text>removeStorageSync</text></div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";

function alert(msg) {
    React.api.showModal({
        title: '',
        content: msg,
        showCancel: false,
        confirmText: '确定'
    });
}

function P() {
    this.state = {
        value: ''
    };
}

P = React.toClass(P, React.Component, {
    setValue: function(e) {
        this.setState({
            value: e.target.value
        });
    },
    setStorage: function() {
        React.api.setStorage({
            key: 'value',
            data: this.state.value,
            success: function(data) {
                alert('handling success');
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    getStorage: function() {
        React.api.getStorage({
            key: 'value',
            success: function(res) {
                alert("handling success, " + res.data);
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    getStorageFail: function() {
        React.api.getStorage({
            key: 'aaa',
            success: function(res) {
                alert("handling success, " + res.data);
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    removeStorage: function() {
        React.api.removeStorage({
            key: 'value',
            success: function(data) {
                alert('handling success');
            },
            fail: function(data, code) {
                alert("handling fail, code = " + code);
            }
        });
    },
    setStorageSync: function() {
        let data = React.api.setStorageSync('value', this.state.value);
        console.log('data', data);
    },
    getStorageSync: function() {
        let data = React.api.getStorageSync('value');
        alert("handling success, " + data);
    },
    removeStorageSync: function() {
        React.api.removeStorageSync('value');
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "col"
        }, h("div", null, h("text", null, "输入要储存的内容, 放value中"), h("input", {
            value: this.state.value,
            onChange: this.setValue.bind(this),
            "data-change-uid": "e90_75",
            "data-beacon-uid": "default"
        })), h("div", {
            onClick: this.setStorage,
            class: "item",
            "data-click-uid": "e91_13",
            "data-beacon-uid": "default"
        }, h("text", null, "setStorage")), h("div", {
            onClick: this.getStorage,
            class: "item",
            "data-click-uid": "e94_13",
            "data-beacon-uid": "default"
        }, h("text", null, "getStorage('value')")), h("div", {
            onClick: this.getStorageFail,
            class: "item",
            "data-click-uid": "e97_13",
            "data-beacon-uid": "default"
        }, h("text", null, "getStorage( 'aaa' )")), h("div", {
            onClick: this.removeStorage,
            class: "item",
            "data-click-uid": "e100_13",
            "data-beacon-uid": "default"
        }, h("text", null, "removeStorage")), h("div", {
            onClick: this.setStorageSync,
            class: "item",
            "data-click-uid": "e103_13",
            "data-beacon-uid": "default"
        }, h("text", null, "setStorageSync")), h("div", {
            onClick: this.getStorageSync,
            class: "item",
            "data-click-uid": "e106_13",
            "data-beacon-uid": "default"
        }, h("text", null, "getStorageSync")), h("div", {
            onClick: this.removeStorageSync,
            class: "item",
            "data-click-uid": "e109_13",
            "data-beacon-uid": "default"
        }, h("text", null, "removeStorageSync")));;
    },
    classUid: "c2964"
}, {});
P = React.registerPage(P, "pages/apis/storage/index");
export default P;
</script>
<style>
.col {
  display: flex;
  flex-direction: column;
  flex: 1;
  width: 100%;
}

.item {
  border: 2px solid #eee;
  padding: 20px 40px;
}
.item text {
  display: flex;
  flex-direction: row;
  justify-content: center;
}
</style>