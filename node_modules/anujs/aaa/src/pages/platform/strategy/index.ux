<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class="strategy-page">
            <block for="(i1027,item) in state.data">
                <div onclick="dispatchEvent" class="strategy-item col" data-click-uid="{{'e45_27_' + i1027}}" data-beacon-uid="default">
                    <image class="big-image" src="{{item.bigImage}}"></image>
                    <div class="strategy-item-content">
                        <div class="col"><text class="desc fontColor">{{item.desc}}</text><text class="date fontColor">{{item.date}}</text></div>
                        <div class="user-wrapper">
                            <div class="user-image">
                                <image class="image" src="{{item.userImage}}"></image>
                            </div><text class="user-name fontColor">{{item.userName}}</text>
                        </div>
                    </div>
                </div>
            </block>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";

function P(props) {
    this.state = {
        data: []
    };
}

P = React.toClass(P, React.Component, {
    componentDidMount: function() {
        let that = this;
        React.api.request({
            url: 'http://yapi.demo.qunar.com/mock/11595/qunar/strategy',
            success: function(res) {
                if (Array.isArray(res.data)) {
                    that.setState({
                        data: res.data
                    });
                }
            },
            fail: function(e) {
                console.log(e, 'fail');
            }
        });
    },
    showTip: function() {
        React.api.showModal({
            title: '提示',
            content: '该部分仅展示，无具体功能!',
            showCancel: false
        });
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "strategy-page"
        }, this.state.data.map(function(item, i1027) {
            return h("div", {
                onClick: this.showTip.bind(this),
                class: "strategy-item col",
                "data-click-uid": 'e45_27_' + i1027,
                "data-beacon-uid": "default"
            }, h("image", {
                class: "big-image",
                src: item.bigImage
            }), h("div", {
                class: "strategy-item-content"
            }, h("div", {
                class: "col"
            }, h("text", {
                class: "desc fontColor"
            }, item.desc), h("text", {
                class: "date fontColor"
            }, item.date)), h("div", {
                class: "user-wrapper"
            }, h("div", {
                class: "user-image"
            }, h("image", {
                class: "image",
                src: item.userImage
            })), h("text", {
                class: "user-name fontColor"
            }, item.userName))));
        }, this));;
    },
    classUid: "c2135"
}, {});
P.config = {
    backgroundColor: '#ffffff',
    navigationBarBackgroundColor: '#fa541c',
    navigationBarTitleText: '去哪儿攻略',
    navigationBarTextStyle: '#d5d6d6'
};
P = React.registerPage(P, "pages/platform/strategy/index");
export default P;
</script>
<style>
.strategy-page {
  flex-direction: column;
  width: 100%;
  background-color: #ffffff;
  align-items: center;
}
.strategy-page .row {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
}
.strategy-page .col {
  display: flex;
  flex-direction: column;
}
.strategy-page .fontColor {
  color: #ffffff;
}
.strategy-page .strategy-item {
  margin-bottom: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.strategy-page .strategy-item .big-image {
  width: 700px;
  height: 350px;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
}
.strategy-page .strategy-item .strategy-item-content {
  width: 660px;
  height: 290px;
  padding-top: 30px;
  padding-right: 20px;
  padding-bottom: 30px;
  padding-left: 20px;
  color: #fff;
  margin-top: -350px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.strategy-page .strategy-item .strategy-item-content .desc {
  font-size: 26px;
  margin-bottom: 10px;
}
.strategy-page .strategy-item .strategy-item-content .date {
  font-size: 22px;
}
.strategy-page .strategy-item .strategy-item-content .user-wrapper {
  font-size: 0;
}
.strategy-page .strategy-item .strategy-item-content .user-wrapper .user-image {
  margin-right: 15px;
  width: 60px;
  height: 60px;
  border-top-left-radius: 30px;
  border-top-right-radius: 30px;
  border-bottom-right-radius: 30px;
  border-bottom-left-radius: 30px;
  background-color: #fff;
}
.strategy-page .strategy-item .strategy-item-content .user-wrapper .user-image .image {
  width: 50px;
  height: 50px;
  border-top-left-radius: 25px;
  border-top-right-radius: 25px;
  border-bottom-right-radius: 25px;
  border-bottom-left-radius: 25px;
  margin-top: 5px;
  margin-right: 0;
  margin-bottom: 0;
  margin-left: 5px;
}
.strategy-page .strategy-item .strategy-item-content .user-wrapper .user-name {
  line-height: 60px;
  font-size: 26px;
}
</style>