<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class="ticket-page" style="background-color: #feb64e">
            <image class="sreach_bg" src="http://picbed.qunarzz.com/image/b96f82f01ef5850d50e93ea511f618fa.png"></image>
            <div style="top: -30px" class="search-container anu-block">
                <div class="citySelector">
                    <div onclick="dispatchEvent" class="cityTap" data-click-uid="e84_27" data-beacon-uid="default"><text class='depCityContent'>{{state.depCity}}</text></div>
                    <div class="city_change">
                        <image class="exchange-logo" src="../../../assets/image/train_icon.png"></image>
                        <image class='exchange-btn' src="../../../assets/image/search_btn.png"></image>
                    </div>
                    <div onclick="dispatchEvent" class="cityTap flex-right" data-click-uid="e98_27" data-beacon-uid="default"><text class='arrCityContent'>{{state.arrCity}}</text></div>
                </div>
                <div onclick="dispatchEvent" class="dateSelector" data-click-uid="e103_23" data-beacon-uid="default"><text>{{state.displayDate}}</text><text class="date-week-text">{{state.dateWeek}}</text></div>
                <div class="switch-content">
                    <div class="switch-label">
                        <image class="hight-speed" src="../../../assets/image/train_highSpeed.png"></image><text class="switch-context {{state.isOnlyGaotie ? 'switch-label-check' : 'switch-label-uncheck'}}">只查看高铁/动车</text>
                    </div>
                    <switch class="switch" checked="{{state.isOnlyGaotie}}" onchange="dispatchEvent" data-change-uid="e124_26" data-beacon-uid="default"></switch>
                </div><text onclick="dispatchEvent" class="search-button" data-click-uid="e129_24" data-beacon-uid="default">搜 索</text>
                <div class="actions-container">
                    <div onclick="dispatchEvent" class="order-action" data-click-uid="e134_27" data-beacon-uid="default"><text class="action-text">我的订单</text></div>
                    <div class="seprator"></div>
                    <div onclick="dispatchEvent" class="feedback-action" data-click-uid="e138_27" data-beacon-uid="default"><text class="action-text">咨询反馈</text></div>
                </div>
            </div>
            <div class="welfare-entrance">
                <div class="welfare-content">
                    <div onclick="dispatchEvent" class="welfare-action" data-click-uid="e146_27" data-beacon-uid="default">
                        <image class="welfare-icon" src="http://s.qunarzz.com/open_m_train/miniprogram/home_redpack.png"></image><text class="action-text">优惠拼团</text>
                    </div>
                    <div class="seprator"></div>
                    <div onclick="dispatchEvent" class="welfare-action" data-click-uid="e154_27" data-beacon-uid="default">
                        <image class="welfare-icon" src="http://s.qunarzz.com/open_m_train/miniprogram/home_welfare.png"></image><text class="action-text">我的福利</text>
                    </div>
                </div>
            </div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";

function P() {
    this.state = {
        depCity: '北京',
        arrCity: '上海',
        exchangeStatus: false,
        displayDate: '8月28日',
        dateWeek: '周二',
        isOnlyGaotie: false,
        isStartCity: true
    };
}

P = React.toClass(P, React.Component, {
    componentWillMount: function() {
        React.getApp().globalData.dateSelect = new Date();
    },
    onShow: function() {
        let date = React.getApp().globalData.dateSelect;
        this.setState({
            displayDate: date.getMonth() + 1 + '月' + date.getDate() + '日'
        });
        this.setState({
            dateWeek: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'][date.getDay()]
        });
        let app = React.getApp();

        if (app.globalData.citySelect) {
            if (!this.state.isStartCity) {
                this.setState({
                    arrCity: app.globalData.citySelect
                });
            } else {
                this.setState({
                    depCity: app.globalData.citySelect
                });
            }
        }
    },
    toDateSelect: function() {
        React.api.navigateTo({
            url: '/pages/platform/calendar/index'
        });
    },
    toCitySelect: function(isStartCity) {
        this.setState({
            isStartCity
        });
        let app = React.getApp();

        if (!isStartCity) {
            app.globalData.citySelect = '上海';
        } else {
            app.globalData.citySelect = '北京';
        }

        React.api.navigateTo({
            url: '/pages/platform/citySelect/index'
        });
    },
    exChangeCity: function() {
        this.setState({
            exchangeStatus: !this.state.exchangeStatus
        });
    },
    showTip: function() {
        React.api.showModal({
            title: '提示',
            content: '该部分仅展示，无具体功能!',
            showCancel: false
        });
    },
    handleChangeSwitch: function() {
        this.setState({
            isOnlyGaotie: !this.state.isOnlyGaotie
        });
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            className: "ticket-page",
            style: "background-color: #feb64e"
        }, h("image", {
            className: "sreach_bg",
            src: "http://picbed.qunarzz.com/image/b96f82f01ef5850d50e93ea511f618fa.png"
        }), h("div", {
            style: "top: -30px",
            className: "search-container anu-block"
        }, h("div", {
            className: "citySelector"
        }, h("div", {
            onClick: this.toCitySelect.bind(this, true),
            className: "cityTap",
            "data-click-uid": "e84_27",
            "data-beacon-uid": "default"
        }, h("text", {
            className: "depCityContent"
        }, this.state.depCity)), h("div", {
            className: "city_change"
        }, h("image", {
            className: "exchange-logo",
            src: "../../../assets/image/train_icon.png"
        }), h("image", {
            className: "exchange-btn",
            src: "../../../assets/image/search_btn.png"
        })), h("div", {
            onClick: this.toCitySelect.bind(this, false),
            className: "cityTap flex-right",
            "data-click-uid": "e98_27",
            "data-beacon-uid": "default"
        }, h("text", {
            className: "arrCityContent"
        }, this.state.arrCity))), h("div", {
            onClick: this.toDateSelect,
            className: "dateSelector",
            "data-click-uid": "e103_23",
            "data-beacon-uid": "default"
        }, h("text", null, this.state.displayDate), h("text", {
            class: "date-week-text"
        }, this.state.dateWeek)), h("div", {
            className: "switch-content"
        }, h("div", {
            className: "switch-label"
        }, h("image", {
            className: "hight-speed",
            src: "../../../assets/image/train_highSpeed.png"
        }), h("text", {
            className: 'switch-context ' + (this.state.isOnlyGaotie ? 'switch-label-check' : 'switch-label-uncheck')
        }, "只查看高铁/动车")), h("switch", {
            class: "switch",
            checked: this.state.isOnlyGaotie,
            onChange: this.handleChangeSwitch.bind(this),
            "data-change-uid": "e124_26",
            "data-beacon-uid": "default"
        })), h("text", {
            onClick: this.showTip,
            className: "search-button",
            "data-click-uid": "e129_24",
            "data-beacon-uid": "default"
        }, "搜 索"), h("div", {
            className: "actions-container"
        }, h("div", {
            onClick: this.showTip,
            className: "order-action",
            "data-click-uid": "e134_27",
            "data-beacon-uid": "default"
        }, h("text", {
            className: "action-text"
        }, "我的订单")), h("div", {
            className: "seprator"
        }), h("div", {
            onClick: this.showTip,
            className: "feedback-action",
            "data-click-uid": "e138_27",
            "data-beacon-uid": "default"
        }, h("text", {
            className: "action-text"
        }, "咨询反馈")))), h("div", {
            className: "welfare-entrance"
        }, h("div", {
            className: "welfare-content"
        }, h("div", {
            onClick: this.showTip,
            className: "welfare-action",
            "data-click-uid": "e146_27",
            "data-beacon-uid": "default"
        }, h("image", {
            className: "welfare-icon",
            src: "http://s.qunarzz.com/open_m_train/miniprogram/home_redpack.png"
        }), h("text", {
            className: "action-text"
        }, "优惠拼团")), h("div", {
            className: "seprator"
        }), h("div", {
            onClick: this.showTip,
            className: "welfare-action",
            "data-click-uid": "e154_27",
            "data-beacon-uid": "default"
        }, h("image", {
            className: "welfare-icon",
            src: "http://s.qunarzz.com/open_m_train/miniprogram/home_welfare.png"
        }), h("text", {
            className: "action-text"
        }, "我的福利")))));;
    },
    classUid: "c6298"
}, {});
P.config = {
    backgroundColor: '#feb64e',
    navigationBarBackgroundColor: '#feb64e',
    navigationBarTitleText: '车牌搜索'
};
P = React.registerPage(P, "pages/platform/ticketSearch/index");
export default P;
</script>
<style>
page {
  height: 100%;
}

.ticket-page {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: #feb64e;
}
.ticket-page .anu-line {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
}
.ticket-page .anu-block {
  display: flex;
  flex-direction: column;
  width: auto;
}
.ticket-page .flex-right {
  display: flex;
  justify-content: flex-end;
  flex: 1;
}
.ticket-page .sreach_bg {
  width: 750px;
  height: 230px;
  background-color: #feb64e;
}
.ticket-page .search-container {
  background-color: #fff;
  padding: 0 30px 10px 30px;
  margin: 0 20px;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  border-bottom-right-radius: 20px;
  border-bottom-left-radius: 20px;
  top: -50px;
}
.ticket-page .search-container .citySelector {
  height: 122px;
  display: flex;
}
.ticket-page .search-container .citySelector .cityTap {
  flex: 1;
  font-size: 42px;
  border-bottom-color: #e7e7e7;
  border-bottom-width: 2px;
}
.ticket-page .search-container .citySelector .cityTap .depCityContent {
  height: 100%;
  line-height: 120px;
}
.ticket-page .search-container .citySelector .cityTap .arrCityContent {
  height: 100%;
  line-height: 120px;
  text-align: right;
}
.ticket-page .search-container .citySelector .city_change {
  display: flex;
  flex-direction: column;
  width: 70px;
  height: 70px;
  margin: 26px 40px;
}
.ticket-page .search-container .citySelector .city_change .exchange-logo {
  width: 46px;
  height: 46px;
  margin: 12px;
}
.ticket-page .search-container .citySelector .city_change .exchange-btn {
  transform: rotate(0);
  width: 70px;
  height: 70px;
  margin: -70px 0 0 0;
}
.ticket-page .search-container .citySelector .city_change .btn-rotating {
  transform: rotate(360deg);
}
.ticket-page .search-container .dateSelector {
  height: 110px;
  line-height: 110px;
  font-size: 42px;
  border-bottom-color: #e7e7e7;
  border-bottom-width: 2px;
  display: flex;
  justify-content: space-between;
  flex-direction: row;
  align-items: center;
}
.ticket-page .search-container .dateSelector .date-week-text {
  font-size: 28px;
  color: #666;
}
.ticket-page .search-container .switch-content {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  margin-top: 30px;
}
.ticket-page .search-container .switch-content .switch-label {
  display: flex;
  flex-direction: row;
  align-items: center;
}
.ticket-page .search-container .switch-content .hight-speed {
  width: 40px;
  height: 40px;
}
.ticket-page .search-container .switch-content .switch-context {
  margin-left: 10px;
}
.ticket-page .search-container .switch-content .switch-label-uncheck {
  font-size: 28px;
  color: #888888;
}
.ticket-page .search-container .switch-content .switch-label-check {
  font-size: 28px;
  color: #333;
}
.ticket-page .search-container .switch-content .switch {
}
.ticket-page .search-container .search-button {
  background-color: #ff9705;
  color: #fff;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  border-bottom-right-radius: 10px;
  border-bottom-left-radius: 10px;
  text-align: center;
  height: 88px;
  line-height: 88px;
  margin: 30px 0;
}
.ticket-page .search-container .actions-container {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  margin-top: 10px;
  margin-bottom: 30px;
}
.ticket-page .search-container .actions-container .order-action {
  display: flex;
  margin-right: 50px;
  align-items: center;
}
.ticket-page .search-container .actions-container .seprator {
  width: 2px;
  height: 50px;
  background-color: #9e9e9e;
}
.ticket-page .search-container .actions-container .feedback-action {
  display: flex;
  margin-left: 50px;
  align-items: center;
}
.ticket-page .search-container .actions-container .action-text {
  font-size: 28px;
  color: #616161;
  margin-left: 20px;
}
.ticket-page .search-container .actions-container .g-q-iconfont {
  font-family: "iconfont";
  font-weight: normal;
  font-style: normal;
}
.ticket-page .welfare-entrance {
  background-color: #fff;
  margin: 0 20px 30px;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  border-bottom-right-radius: 20px;
  border-bottom-left-radius: 20px;
  align-items: center;
}
.ticket-page .welfare-entrance .welfare-content {
  display: flex;
  align-items: center;
  flex: 1;
  justify-content: center;
}
.ticket-page .welfare-entrance .welfare-content .welfare-action {
  height: 138px;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.ticket-page .welfare-entrance .welfare-content .welfare-action .welfare-icon {
  width: 78px;
  height: 78px;
}
.ticket-page .welfare-entrance .welfare-content .welfare-action .action-text {
  font-size: 28px;
  color: #616161;
  margin-left: 20px;
}
.ticket-page .welfare-entrance .welfare-content .seprator {
  width: 2px;
  height: 50px;
  background-color: #9e9e9e;
}
</style>