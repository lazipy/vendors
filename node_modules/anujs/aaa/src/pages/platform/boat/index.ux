<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class='boat'>
            <div class='boat-content'>
                <div class='city-select-container'>
                    <div onclick="dispatchEvent" class='orgin-city-wrapper col' data-click-uid="e66_29" data-beacon-uid="default">
                        <div class='tip-wrapper row'>
                            <div class='dot'></div><text class="font-22">出发</text>
                        </div>
                        <div class='orgin-ctiy'><text class="font-38">{{state.orginCity}}</text></div>
                    </div>
                    <div onclick="dispatchEvent" class='switch-logo' data-click-uid="e70_29" data-beacon-uid="default">
                        <image class="image" src="../../../assets/image/switch.png"></image>
                    </div>
                    <div onclick="dispatchEvent" class='target-city-wrapper col' data-click-uid="e73_29" data-beacon-uid="default">
                        <div class='tip-wrapper row'>
                            <div class='dot'></div><text class="font-22">到达</text>
                        </div>
                        <div class='target-ctiy'><text class="font-38">{{state.targerCity}}</text></div>
                    </div>
                </div>
                <div onclick="dispatchEvent" class='date-select-container col' data-click-uid="e78_25" data-beacon-uid="default"><text class='title'>出发日期</text><text class='date'>{{state.date}}</text></div><text onclick="dispatchEvent" class='search-btn' data-click-uid="e82_26" data-beacon-uid="default">开始查询</text>
            </div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";
const WEEK = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];

function P() {
    this.state = {
        date: '',
        orginCity: '鼓浪屿',
        targerCity: '厦门',
        isStartCity: true
    };
}

P = React.toClass(P, React.Component, {
    componentWillMount: function() {
        React.getApp().globalData.dateSelect = new Date();
    },
    onShow: function() {
        let date = React.getApp().globalData.dateSelect;
        date = date.getMonth() + 1 + '月' + date.getDate() + '日 ' + WEEK[date.getDay()];
        this.setState({
            date
        });
        let app = React.getApp();

        if (app.globalData.citySelect) {
            if (this.state.isStartCity) {
                this.setState({
                    orginCity: app.globalData.citySelect
                });
            } else {
                this.setState({
                    targerCity: app.globalData.citySelect
                });
            }
        }
    },
    fun_tip: function() {
        React.api.showModal({
            title: '提示',
            content: '该部分仅展示，无具体功能!',
            showCancel: false
        });
    },
    toCitySelect: function(isStartCity) {
        this.setState({
            isStartCity
        });
        React.api.navigateTo({
            url: '/pages/platform/citySelect/index'
        });
    },
    toDateSelect: function() {
        React.api.navigateTo({
            url: '/pages/platform/calendar/index'
        });
    },
    exChangeCity: function() {
        let curData = this.state.orginCity;
        this.setState({
            orginCity: this.state.targerCity
        });
        this.setState({
            targerCity: curData
        });
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "boat"
        }, h("div", {
            class: "boat-content"
        }, h("div", {
            class: "city-select-container"
        }, h("div", {
            onClick: this.toCitySelect.bind(this, true),
            class: "orgin-city-wrapper col",
            "data-click-uid": "e66_29",
            "data-beacon-uid": "default"
        }, h("div", {
            class: "tip-wrapper row"
        }, h("div", {
            class: "dot"
        }), h("text", {
            class: "font-22"
        }, "出发")), h("div", {
            class: "orgin-ctiy"
        }, h("text", {
            class: "font-38"
        }, this.state.orginCity))), h("div", {
            onClick: this.exChangeCity.bind(this),
            class: "switch-logo",
            "data-click-uid": "e70_29",
            "data-beacon-uid": "default"
        }, h("image", {
            class: "image",
            src: "../../../assets/image/switch.png"
        })), h("div", {
            onClick: this.toCitySelect.bind(this, false),
            class: "target-city-wrapper col",
            "data-click-uid": "e73_29",
            "data-beacon-uid": "default"
        }, h("div", {
            class: "tip-wrapper row"
        }, h("div", {
            class: "dot"
        }), h("text", {
            class: "font-22"
        }, "到达")), h("div", {
            class: "target-ctiy"
        }, h("text", {
            class: "font-38"
        }, this.state.targerCity)))), h("div", {
            onClick: this.toDateSelect.bind(this),
            class: "date-select-container col",
            "data-click-uid": "e78_25",
            "data-beacon-uid": "default"
        }, h("text", {
            class: "title"
        }, "出发日期"), h("text", {
            class: "date"
        }, this.state.date)), h("text", {
            onClick: this.fun_tip.bind(this),
            class: "search-btn",
            "data-click-uid": "e82_26",
            "data-beacon-uid": "default"
        }, "开始查询")));;
    },
    classUid: "c3340"
}, {});
P.config = {
    backgroundColor: '#3399ff',
    navigationBarBackgroundColor: '#3399ff',
    navigationBarTitleText: '船票'
};
P = React.registerPage(P, "pages/platform/boat/index");
export default P;
</script>
<style>
.col {
  display: flex;
  flex-direction: column;
}

page {
  background-color: #3399ff;
}

.row {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
}

.font-38 {
  font-size: 38px;
}

.font-22 {
  font-size: 22px;
}

.boat {
  align-self: flex-start;
  width: 100%;
  margin-top: 180px;
}
.boat .boat-content {
  display: flex;
  flex-direction: column;
  background-color: #fff;
  padding: 30px 25px;
  padding-bottom: 50px;
  margin: 0 20px;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  border-bottom-right-radius: 20px;
  border-bottom-left-radius: 20px;
}
.boat .boat-content .city-select-container {
  margin-bottom: 40px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}
.boat .boat-content .city-select-container .dot {
  width: 12px;
  height: 12px;
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
  border-bottom-left-radius: 6px;
  margin-right: 8px;
}
.boat .boat-content .city-select-container .orgin-city-wrapper {
  width: 250px;
  font-size: 38px;
  border-bottom-color: #bdbcbc;
  border-bottom-width: 2px;
  padding-bottom: 10px;
}
.boat .boat-content .city-select-container .orgin-city-wrapper .tip-wrapper {
  font-size: 22px;
  color: #b6b6b6;
}
.boat .boat-content .city-select-container .orgin-city-wrapper .tip-wrapper .dot {
  background-color: #44f87a;
}
.boat .boat-content .city-select-container .target-city-wrapper {
  width: 250px;
  font-size: 38px;
  border-bottom-color: #bdbcbc;
  border-bottom-width: 2px;
  align-items: flex-end;
  padding-bottom: 10px;
}
.boat .boat-content .city-select-container .target-city-wrapper .tip-wrapper {
  font-size: 22px;
  color: #b6b6b6;
}
.boat .boat-content .city-select-container .target-city-wrapper .tip-wrapper .dot {
  background-color: #e45d5d;
}
.boat .boat-content .city-select-container .switch-logo {
  width: 70px;
  height: 70px;
  border-top-left-radius: 36px;
  border-top-right-radius: 36px;
  border-bottom-right-radius: 36px;
  border-bottom-left-radius: 36px;
  border: 2px solid #000;
}
.boat .boat-content .city-select-container .switch-logo .image {
  width: 46px;
  height: 32px;
  margin-top: 18px;
  margin-left: 10px;
}
.boat .boat-content .date-select-container {
  margin-bottom: 40px;
}
.boat .boat-content .date-select-container .title {
  font-size: 24px;
  color: #b6b6b6;
}
.boat .boat-content .date-select-container .date {
  font-size: 38px;
}
.boat .boat-content .search-btn {
  width: 100%;
  border-top-left-radius: 37px;
  border-top-right-radius: 37px;
  border-bottom-right-radius: 37px;
  border-bottom-left-radius: 37px;
  line-height: 74px;
  text-align: center;
  background-color: #f38e3c;
  color: #fff;
  width: 100%;
  font-size: 38px;
}
</style>