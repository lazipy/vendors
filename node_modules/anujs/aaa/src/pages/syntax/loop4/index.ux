<import name="anu-cat" src="../components/Cat/index.ux"></import>
<import name="anu-fish" src="../components/Fish/index.ux"></import>
<import name="anu-xradiogroup" src="../../../npm/schnee-ui/components/XRadioGroup/index.ux"></import>
<import name="anu-xradio" src="../../../npm/schnee-ui/components/XRadio/index.ux"></import>
<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class="anu-block">
            <div><text>循环里面交替使用两利不同的组件</text></div>
            <div class="anu-block">
                <block for="(i2048,msg) in state.msgList">
                    <div class='anu-block'>
                        <block if="{{msg.type === 'Cat'}}">
                            <anu-cat data-instance-uid="{{'i84_36_' + i2048}}"></anu-cat>
                        </block>
                        <block if="{{msg.type === 'Fish'}}">
                            <anu-fish data-instance-uid="{{'i87_36_' + i2048}}"></anu-fish>
                        </block>
                    </div>
                </block>
            </div>
            <anu-xradiogroup data-instance-uid="{{'i93_16_' + 0}}">
                <anu-xradio data-instance-uid="{{'i94_20_' + 0}}"></anu-xradio>Cat<anu-xradio data-instance-uid="{{'i95_20_' + 0}}"></anu-xradio>Fish
            </anu-xradiogroup><textarea auto-height="{{true}}" onchange="dispatchEvent" style="border:2px solid grey;" data-change-uid="e97_70" data-beacon-uid="default"></textarea>
            <div onclick="dispatchEvent" data-click-uid="e98_38" data-beacon-uid="default"><text>添加</text></div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";
var type = "Cat";

function P() {
    this.state = {
        input: '',
        idCounter: 3,
        msgList: [{
            id: 0,
            type: 'Cat',
            content: '我的蛙儿子到现在都没回家'
        }, {
            id: 1,
            type: 'Fish',
            content: '你中毒已深'
        }, {
            id: 2,
            type: 'Cat',
            content: '他该不会嫌弃他母亲穷，在外面有家了吧？'
        }, {
            id: 3,
            type: 'Fish',
            content: '应该没有这种操作吧？'
        }, {
            id: 4,
            type: 'Cat',
            content: '难不成被贝爷吃了？'
        }, {
            id: 4,
            type: 'Fish',
            content: '那一定是你没有为他买幸运铃！'
        }]
    };
}

P = React.toClass(P, React.Component, {
    sendMsg: function() {
        if (!this.state.value) {
            console.warn('没有内容');
            return;
        }

        let msgList = [...this.state.msgList];
        let id = this.state.idCounter + 1;
        msgList.push({
            id: id + '',
            type: type,
            content: this.state.value
        });
        this.setState({
            value: '',
            msgList,
            idCounter: id
        });
    },
    onSelect: function(e) {
        type = e.detail.value || e.target.value;
    },
    onChange: function(e) {
        this.setState({
            value: e.target.value
        });
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "anu-block"
        }, h("div", null, "循环里面交替使用两利不同的组件"), h("div", {
            class: "anu-block"
        }, this.state.msgList.map(function(msg, i2048) {
            return h("div", {
                class: "anu-block",
                key: msg.id
            }, msg.type === 'Cat' && h(React.useComponent, {
                id: msg.id,
                content: msg.content,
                is: "Cat",
                "data-instance-uid": 'i84_36_' + i2048
            }), msg.type === 'Fish' && h(React.useComponent, {
                id: msg.id,
                content: msg.content,
                is: "Fish",
                "data-instance-uid": 'i87_36_' + i2048
            }));
        }, this)), h(React.useComponent, {
            class: "radio-group",
            onChange: this.onSelect.bind(this),
            is: "XRadioGroup",
            "data-instance-uid": 'i93_16_' + 0
        }, h(React.useComponent, {
            value: "Cat",
            is: "XRadio",
            "data-instance-uid": 'i94_20_' + 0
        }), "Cat", h(React.useComponent, {
            value: "Fish",
            is: "XRadio",
            "data-instance-uid": 'i95_20_' + 0
        }), "Fish"), h("textarea", {
            "auto-height": true,
            onChange: this.onChange.bind(this),
            style: "border:2px solid grey;",
            "data-change-uid": "e97_70",
            "data-beacon-uid": "default"
        }), h("div", {
            onClick: this.sendMsg.bind(this),
            "data-click-uid": "e98_38",
            "data-beacon-uid": "default"
        }, "添加"));;
    },
    classUid: "c3297"
}, {});
P = React.registerPage(P, "pages/syntax/loop4/index");
export default P;
</script>
<style>
@import '../../../assets/global.css';
</style>