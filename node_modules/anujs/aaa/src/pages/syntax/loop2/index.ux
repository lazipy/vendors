<import name="anu-fish" src="../components/Fish/index.ux"></import>
<import name="anu-page-wrapper" src="../../../components/PageWrapper/index.ux"></import>
<template>
    <anu-page-wrapper>
        <div class='anu-block'>
            <div><text>测试循环中的事件，点击下方格子</text></div>
            <div><text>title:</text><text>{{state.title}}</text><text>{{' key '}}</text><text>{{state.key}}</text></div>
            <div class="anu-block">
                <block for="(i,item) in state.trs">
                    <div class="anu-line">
                        <block for="(j,el) in item">
                            <div class="loop2-cell" onClick="dispatchEvent" data-click-uid="{{'e43_44_' + i + '-' + j}}" data-beacon-uid="default">
                                <anu-fish data-instance-uid="{{'i46_44_' + i + '-' + j}}"></anu-fish>
                            </div>
                        </block>
                    </div>
                </block>
            </div>
        </div>
    </anu-page-wrapper>
</template>
<script>
import React from "../../../ReactQuick.js";

function P() {
    this.state = {
        title: '',
        key: '',
        trs: [
            [{
                title: 'aaa'
            }, {
                title: 'bbb'
            }, {
                title: 'ccc'
            }],
            [{
                title: 'ddd'
            }, {
                title: 'eee'
            }, {
                title: 'fff'
            }],
            [{
                title: 'ggg'
            }, {
                title: 'hhh'
            }, {
                title: 'iii'
            }]
        ]
    };
}

P = React.toClass(P, React.Component, {
    getData: function(item, e) {
        this.setState({
            title: item.title,
            key: e.target.dataset.key
        });
    },
    render: function() {
        var h = React.createElement;
        return h("div", {
            class: "anu-block"
        }, h("div", null, "测试循环中的事件，点击下方格子"), h("div", null, "title:", this.state.title, '  key ', this.state.key), h("div", {
            class: "anu-block"
        }, this.state.trs.map(function(item, i) {
            return h("div", {
                class: "anu-line"
            }, item.map(function(el, j) {
                return h("div", {
                    class: "loop2-cell",
                    key: el.title,
                    onClick: e => {
                        this.getData(el, e);
                    },
                    "data-click-uid": 'e43_44_' + i + '-' + j,
                    "data-beacon-uid": "default"
                }, h(React.useComponent, {
                    id: i * 10 + j,
                    content: el.title,
                    is: "Fish",
                    "data-instance-uid": 'i46_44_' + i + '-' + j
                }));
            }, this));
        }, this)));;
    },
    classUid: "c1967"
}, {});
P = React.registerPage(P, "pages/syntax/loop2/index");
export default P;
</script>
<style>
@import '../../../assets/global.css';
.loop2-cell {
  width: 32%;
  height: 200px;
  border: 2px solid violet;
  text-align: center;
}
</style>